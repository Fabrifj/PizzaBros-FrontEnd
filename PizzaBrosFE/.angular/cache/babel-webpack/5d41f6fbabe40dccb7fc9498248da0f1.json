{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/servicios/app-http.service\";\nimport * as i2 from \"src/app/shared-modules/modal/modal.service\";\nimport * as i3 from \"../../../../shared-modules/modal/modal.component\";\nimport * as i4 from \"../../../../shared-modules/tabla-reusable/tabla-reusable.component\";\nexport let CreacionProductosComponent = /*#__PURE__*/(() => {\n  class CreacionProductosComponent {\n    constructor(servicioHttp, servicioModal) {\n      this.servicioHttp = servicioHttp;\n      this.servicioModal = servicioModal;\n      this.objetoSeleccionado = {};\n      this.columnasProd = [{\n        field: 'Nombre',\n        header: 'Nombre'\n      }, {\n        field: 'Descripcion',\n        header: 'Descripcion'\n      } // {field:'Imagen',header:'Imagen'}\n      ];\n      this.columnasIngMini = [{\n        field: 'Nombre',\n        header: 'Nombre Ingrediente'\n      }, {\n        field: 'TipoUnidad',\n        header: 'Tipo de Unidad'\n      }, {\n        field: 'Costo',\n        header: 'Costo Media'\n      }];\n      this.columnasIng = [{\n        field: 'Nombre',\n        header: 'Nombre Ingrediente'\n      }, {\n        field: 'TipoUnidad',\n        header: 'Tipo de Unidad'\n      }, //{field:'CantidadInventario',header:'Cantidad en Inventario'},\n      {\n        field: 'CostoMedia',\n        header: 'Costo Media'\n      }];\n      this.nombreBotonesProd1 = ['Seleccionar'];\n      this.nombreBotonesIng1 = ['Agregar'];\n      this.nombreBotonesIng2 = ['Quitar'];\n      this.titulosIng = ['Cantidad'];\n    }\n\n    ngOnInit() {\n      this.filtroCrear();\n      this.obtenerIngredientes();\n    }\n\n    obtenerIngredientes() {\n      this.servicioHttp.obtenerIngredientes().subscribe(jsonFile => {\n        console.log(jsonFile);\n        this.datosIng = jsonFile;\n        this.datosIngBackUp = jsonFile;\n      }, error => {\n        console.log(\"hubo error con productos\");\n      });\n    }\n\n    obtenerProductos() {\n      this.servicioHttp.obtenerProductos().subscribe(jsonFile => {\n        console.log(jsonFile);\n        this.datosProd = jsonFile;\n      }, error => {\n        console.log(\"hubo error con productos\");\n      });\n    }\n\n    funcionBoton(names) {\n      if (names[0] == \"Seleccionar\") {\n        //this.obtenerIngredientes();\n        this.objetoSeleccionado = names[1];\n        console.log(\"objetoseleccion:\", this.objetoSeleccionado);\n        this.datosIngMini = this.objetoSeleccionado.ListaIngredientes;\n        console.log('datosINGmini', this.datosIngMini);\n        this.datosIngMini.forEach(element => {\n          //quitar de lista grande\n          console.log(\"element:\", element.IdIngrediente);\n          console.log(\"datos\", this.datosIng);\n          this.datosIng = this.datosIng.filter(obj => obj.id !== element.IdIngrediente);\n        }); //rellenamos los valores\n\n        document.getElementById(\"objetoSeleccionadoID\").value = this.objetoSeleccionado.Nombre;\n        document.getElementById(\"nuevoNP\").value = this.objetoSeleccionado.Nombre;\n        document.getElementById(\"nuevoTP\").value = this.objetoSeleccionado.Tamano;\n        document.getElementById(\"nuevoPP\").value = this.objetoSeleccionado.Precio;\n        document.getElementById(\"nuevoCP\").value = this.objetoSeleccionado.Costo;\n        document.getElementById(\"nuevoIP\").value = this.objetoSeleccionado.ImgURL;\n        var indice1 = 0;\n        this.datosIngMini.forEach(element => {\n          var indice2 = 0;\n          this.titulosIng.forEach(titulo => {\n            var nombreCC = 'textoCantidad' + indice1 + indice2;\n            document.getElementById(nombreCC).value = element.Cantidad;\n            indice2 = indice2 + 1;\n          });\n          indice1 = indice1 + 1;\n        }); //new\n\n        this.servicioModal.cerrar('modalProd-2');\n      } else if (names[0] == \"Agregar\") {\n        var elemAgregar = names[1]; //console.log(elemAgregar);\n        //quitar de lista grande\n\n        this.datosIng = this.datosIng.filter(obj => obj.id !== elemAgregar.id); //agregar a lista pequna\n\n        var elemNuevo = JSON.stringify({\n          IdIngrediente: elemAgregar.id,\n          Nombre: elemAgregar.Nombre,\n          Costo: elemAgregar.CostoMedia,\n          Cantidad: elemAgregar.CantidadInventario,\n          TipoUnidad: elemAgregar.TipoUnidad\n        });\n        this.datosIngMini.push(JSON.parse(elemNuevo));\n        var costo = 0;\n        this.datosIngMini.forEach(element => {\n          costo = costo + parseInt(element.Costo);\n        });\n        document.getElementById(\"nuevoCP\").value = String(costo);\n        var indice1 = 0;\n        this.datosIngMini.forEach(element => {\n          var indice2 = 0;\n          this.titulosIng.forEach(titulo => {\n            var nombreCC = 'textoCantidad' + String(indice1) + String(indice2);\n            console.log(nombreCC);\n            document.getElementById(nombreCC).value = \"0\";\n            indice2 = indice2 + 1;\n          });\n          indice1 = indice1 + 1;\n        });\n      } else if (names[0] == \"Quitar\") {\n        //quitar\n        var elemQuitar = names[1];\n        var ingSeleccionado = {};\n        this.datosIngBackUp.forEach(element => {\n          if (element.id == elemQuitar.IdIngrediente) {\n            ingSeleccionado = element;\n          }\n        }); //qutiar mini lista\n\n        this.datosIngMini = this.datosIngMini.filter(obj => obj.IdIngrediente !== elemQuitar.IdIngrediente); // var elemNuevo = JSON.stringify({ id: elemQuitar.IdProducto , Nombre: elemQuitar.NombreProducto , ImgURL: elemQuitar.ImgURL});\n\n        var costo = 0;\n        this.datosIngMini.forEach(element => {\n          costo = costo + parseInt(element.Costo);\n        });\n        document.getElementById(\"nuevoCP\").value = String(costo);\n        console.log(\"ingseleccionado\", ingSeleccionado);\n        this.datosIng.push(ingSeleccionado);\n      } else {\n        //Guardar todo\n        this.datosIngrendientesCCantidad = names[1];\n        var costo = 0;\n        this.datosIngrendientesCCantidad.forEach(element => {\n          costo = costo + parseInt(element.Costo);\n        });\n        document.getElementById(\"nuevoCP\").value = String(costo);\n      }\n    }\n\n    filtroCrear() {\n      this.nombreBoton = \"CREAR\";\n      this.objetoSeleccionado = \"\";\n      this.datosIngMini = [];\n      this.datosProd = this.datosIngBackUp;\n      document.getElementById(\"crearP\").checked = true;\n      document.getElementById(\"siModifico\").style.display = \"none\";\n      document.getElementById(\"nuevoNP\").value = \"\";\n      document.getElementById(\"nuevoTP\").value = \"\";\n      document.getElementById(\"nuevoPP\").value = \"0\";\n      document.getElementById(\"nuevoCP\").value = \"0\";\n      document.getElementById(\"nuevoIP\").value = \"\";\n    }\n\n    filtroModificar() {\n      this.nombreBoton = \"MODIFICAR\";\n      this.obtenerProductos();\n      this.servicioModal.abrir('modalProd-2');\n      document.getElementById(\"siModifico\").style.display = \"inline\";\n    }\n\n    crearProducto() {\n      var nombreP = document.getElementById(\"nuevoNP\").value;\n      var tamanoP = document.getElementById(\"nuevoTP\").value;\n      var precioP = document.getElementById(\"nuevoPP\").value;\n      var costoP = document.getElementById(\"nuevoCP\").value;\n      var imgP = document.getElementById(\"nuevoIP\").value;\n      console.log(this.datosIngrendientesCCantidad);\n      var producto = JSON.stringify({\n        ListaIngredientes: this.datosIngrendientesCCantidad,\n        Nombre: nombreP,\n        Tamano: tamanoP,\n        Costo: costoP,\n        Precio: precioP,\n        ImgURL: imgP\n      });\n      console.log(JSON.parse(producto));\n\n      if (this.nombreBoton == \"CREAR\") {\n        this.servicioHttp.crearProducto(JSON.parse(producto)).subscribe(jsonFile => {\n          console.log(\"creado bien\");\n          alert('producto creada correctamente');\n        }, error => {\n          console.log(\"hubo error con crear producto\");\n        });\n      } else {\n        //modificar\n        console.log(\"id modificar:\", this.objetoSeleccionado.id);\n        this.servicioHttp.actualizarProducto(this.objetoSeleccionado.id, JSON.parse(producto)).subscribe(jsonFile => {\n          alert('producto modificada correctamente');\n          console.log(\"modificado bien\");\n        }, error => {\n          console.log(\"hubo error con modificar prodcuto\");\n        });\n      }\n\n      this.filtroCrear();\n      this.obtenerIngredientes();\n    }\n\n  }\n\n  CreacionProductosComponent.ɵfac = function CreacionProductosComponent_Factory(t) {\n    return new (t || CreacionProductosComponent)(i0.ɵɵdirectiveInject(i1.AppHttpService), i0.ɵɵdirectiveInject(i2.ModalService));\n  };\n\n  CreacionProductosComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: CreacionProductosComponent,\n    selectors: [[\"app-creacion-productos\"]],\n    decls: 53,\n    vars: 11,\n    consts: [[1, \"contenedorFiltros\"], [\"type\", \"radio\", \"id\", \"crearP\", \"name\", \"prodCrear\", \"checked\", \"\", 3, \"click\"], [\"for\", \"contactChoice1\"], [\"type\", \"radio\", \"id\", \"modP\", \"name\", \"prodCrear\", 3, \"click\"], [\"for\", \"contactChoice2\"], [\"id\", \"siModifico\"], [\"type\", \"text\", \"id\", \"objetoSeleccionadoID\", \"readonly\", \"\"], [\"id\", \"modalProd-2\", \"altura\", \"80\"], [\"id\", \"tablaProductos\"], [\"colorLetra\", \"black\", 3, \"datos\", \"columnas\", \"nombreBotones\", \"parentMethod\"], [1, \"botones\"], [1, \"btnCerrar\", 3, \"click\"], [1, \"contendorDatosP\"], [1, \"infoEditable\"], [\"type\", \"text\", \"id\", \"nuevoNP\"], [\"id\", \"nuevoTP\"], [\"readonly\", \"\", \"type\", \"text\", \"id\", \"nuevoCP\"], [\"type\", \"text\", \"id\", \"nuevoPP\"], [\"type\", \"text\", \"id\", \"nuevoIP\"], [1, \"contendorListadoSi\"], [\"colorLetra\", \"black\", \"botonGuardarDatos\", \"si\", 3, \"datos\", \"columnas\", \"nombreBotones\", \"titulosTextos\", \"parentMethod\"], [1, \"contendorListadoNo\"], [\"colorLetra\", \"black\", \"indice\", \"1\", 3, \"datos\", \"columnas\", \"nombreBotones\", \"parentMethod\"], [1, \"contenedorBotones\"], [1, \"botonFinal\", 3, \"click\"]],\n    template: function CreacionProductosComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵelementStart(1, \"form\");\n        i0.ɵɵelementStart(2, \"div\");\n        i0.ɵɵelementStart(3, \"div\");\n        i0.ɵɵelementStart(4, \"input\", 1);\n        i0.ɵɵlistener(\"click\", function CreacionProductosComponent_Template_input_click_4_listener() {\n          return ctx.filtroCrear();\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(5, \"label\", 2);\n        i0.ɵɵtext(6, \"Crear Producto\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(7, \"div\");\n        i0.ɵɵelementStart(8, \"input\", 3);\n        i0.ɵɵlistener(\"click\", function CreacionProductosComponent_Template_input_click_8_listener() {\n          return ctx.filtroModificar();\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(9, \"label\", 4);\n        i0.ɵɵtext(10, \"Modificar Producto\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(11, \"div\", 5);\n        i0.ɵɵelementStart(12, \"h3\");\n        i0.ɵɵtext(13, \"Producto a Modificar:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(14, \"input\", 6);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(15, \"jw-modal\", 7);\n        i0.ɵɵelementStart(16, \"h1\");\n        i0.ɵɵtext(17, \"Elegir Producto:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(18, \"div\", 8);\n        i0.ɵɵelementStart(19, \"app-tabla-reusable\", 9);\n        i0.ɵɵlistener(\"parentMethod\", function CreacionProductosComponent_Template_app_tabla_reusable_parentMethod_19_listener($event) {\n          return ctx.funcionBoton($event);\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(20, \"div\", 10);\n        i0.ɵɵelementStart(21, \"button\", 11);\n        i0.ɵɵlistener(\"click\", function CreacionProductosComponent_Template_button_click_21_listener() {\n          ctx.servicioModal.cerrar(\"modalProd-2\");\n          return ctx.filtroCrear();\n        });\n        i0.ɵɵtext(22, \"Cancelar\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(23, \"div\", 12);\n        i0.ɵɵelementStart(24, \"div\", 13);\n        i0.ɵɵelementStart(25, \"h2\");\n        i0.ɵɵtext(26, \"Nombre:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(27, \"input\", 14);\n        i0.ɵɵelementStart(28, \"h2\");\n        i0.ɵɵtext(29, \"Tama\\u00F1o:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(30, \"input\", 15);\n        i0.ɵɵelementStart(31, \"h2\");\n        i0.ɵɵtext(32, \"Costo:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(33, \"input\", 16);\n        i0.ɵɵelementStart(34, \"h2\");\n        i0.ɵɵtext(35, \"Precio:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(36, \"input\", 17);\n        i0.ɵɵelementStart(37, \"h2\");\n        i0.ɵɵtext(38, \"Imagen:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(39, \"input\", 18);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(40, \"div\", 19);\n        i0.ɵɵelementStart(41, \"h1\");\n        i0.ɵɵtext(42, \"Ingredientes que estan:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(43, \"app-tabla-reusable\", 20);\n        i0.ɵɵlistener(\"parentMethod\", function CreacionProductosComponent_Template_app_tabla_reusable_parentMethod_43_listener($event) {\n          return ctx.funcionBoton($event);\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(44, \"div\", 21);\n        i0.ɵɵelementStart(45, \"h1\");\n        i0.ɵɵtext(46, \"Ingredientes por anadir:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(47, \"app-tabla-reusable\", 22);\n        i0.ɵɵlistener(\"parentMethod\", function CreacionProductosComponent_Template_app_tabla_reusable_parentMethod_47_listener($event) {\n          return ctx.funcionBoton($event);\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(48, \"div\", 23);\n        i0.ɵɵelementStart(49, \"button\", 24);\n        i0.ɵɵlistener(\"click\", function CreacionProductosComponent_Template_button_click_49_listener() {\n          return ctx.crearProducto();\n        });\n        i0.ɵɵtext(50);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(51, \"button\", 24);\n        i0.ɵɵlistener(\"click\", function CreacionProductosComponent_Template_button_click_51_listener() {\n          return ctx.filtroCrear();\n        });\n        i0.ɵɵtext(52, \"Cancelar\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(19);\n        i0.ɵɵproperty(\"datos\", ctx.datosProd)(\"columnas\", ctx.columnasProd)(\"nombreBotones\", ctx.nombreBotonesProd1);\n        i0.ɵɵadvance(24);\n        i0.ɵɵproperty(\"datos\", ctx.datosIngMini)(\"columnas\", ctx.columnasIngMini)(\"nombreBotones\", ctx.nombreBotonesIng2)(\"titulosTextos\", ctx.titulosIng);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"datos\", ctx.datosIng)(\"columnas\", ctx.columnasIng)(\"nombreBotones\", ctx.nombreBotonesIng1);\n        i0.ɵɵadvance(3);\n        i0.ɵɵtextInterpolate(ctx.nombreBoton);\n      }\n    },\n    directives: [i3.ModalComponent, i4.TablaReusableComponent],\n    styles: [\".contenedorFiltros[_ngcontent-%COMP%]{margin:2px}\"]\n  });\n  return CreacionProductosComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}