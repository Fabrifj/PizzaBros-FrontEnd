{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../../../shared-modules/modal/modal.service\";\nimport * as i2 from \"src/app/servicios/app-http.service\";\nimport * as i3 from \"../../../shared-modules/tabla-reusable/tabla-reusable.component\";\nimport * as i4 from \"../../../shared-modules/modal/modal.component\";\nexport let PedidosActivosComponent = /*#__PURE__*/(() => {\n  class PedidosActivosComponent {\n    constructor(modalServicio, httpServicio) {\n      this.modalServicio = modalServicio;\n      this.httpServicio = httpServicio;\n      this.fecha = '';\n      this.pedidoSeleccionado = {};\n      this.pedidoSeleccionadoColumnas = [{\n        field: 'Cantidad',\n        header: 'Cantidad'\n      }, {\n        field: 'Nombre',\n        header: 'Nombre'\n      }, {\n        field: 'Precio',\n        header: 'Precio'\n      }];\n      this.columnas = [{\n        field: 'NITCliente',\n        header: 'NIT de Cliente'\n      }, {\n        field: 'NombreCliente',\n        header: 'Nombre de Cliente'\n      }, {\n        field: 'Precio',\n        header: 'Total Bs.'\n      }, {\n        field: 'Fecha',\n        header: 'Fecha'\n      }, {\n        field: 'Estado',\n        header: 'Estado'\n      }];\n      this.filtros = [['username', 'Bret', true], ['username', 'Antonette', true]];\n    }\n\n    ngOnInit() {\n      this.nombreBotones = ['Ver Pedido', 'Cambiar Estado'];\n      this.obtenerPedidosP();\n    }\n\n    obtenerPedidosP() {\n      this.httpServicio.obtenerPedidoEstadoPr().subscribe(jsonFile => {\n        //this.Orders = this.JSON_MAPPER.readValue(jsonFile, FinalOrderModel[])\n        console.log(jsonFile);\n        this.datos = jsonFile;\n        this.modificarFecha();\n      }, error => {\n        console.log(\"hubo un error\");\n      });\n    }\n\n    modificarFecha() {\n      this.datos.forEach(elemento => {\n        let fecha = elemento.Fecha.seconds;\n        let date;\n        date = new Date(fecha * 1000);\n        elemento.Fecha = date; //element.Fecha = fecha.toDate().toDateString();\n      });\n    }\n\n    funcionBoton(nombres) {\n      if (nombres[0] == \"Ver Pedido\") {\n        console.log(\"boton: ver pedido\");\n        this.pedidoSeleccionado = nombres[1];\n        console.log(nombres[1]);\n        this.modalServicio.abrir('modal-1');\n        this.pedidoSeleccionadoDatos = this.pedidoSeleccionado.Detalle; //inicialize tabla dos\n      } else {\n        console.log(\"papa: cambiar estado\");\n        this.pedidoSeleccionado = nombres[1];\n        this.modalServicio.abrir('modal-2'); //this.cambiarEstado(names[1]);\n      }\n    }\n\n    cambiarEstado(pedido) {\n      //let stringBody = \"'{\\\"IdPedido\\\":\\\"\" +pedido.id + \",\\\"Estado\\\" : \\\"Entregado\\\"\";  \n      let body = JSON.stringify({\n        IdPedido: pedido.id,\n        Estado: \"Entregado\"\n      });\n      console.log(JSON.parse(body));\n      this.httpServicio.actualizarPedidoEstado(JSON.parse(body)).subscribe(response => {\n        console.log('Response from API', response);\n        this.obtenerPedidosP();\n      }, error => {\n        console.log('Error', error);\n      });\n      this.modalServicio.cerrar('modal-2');\n    }\n\n  }\n\n  PedidosActivosComponent.ɵfac = function PedidosActivosComponent_Factory(t) {\n    return new (t || PedidosActivosComponent)(i0.ɵɵdirectiveInject(i1.ModalService), i0.ɵɵdirectiveInject(i2.AppHttpService));\n  };\n\n  PedidosActivosComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: PedidosActivosComponent,\n    selectors: [[\"app-pedidos-activos\"]],\n    decls: 21,\n    vars: 6,\n    consts: [[1, \"tablaUsuarios\"], [\"colorLetra\", \"cornsilk\", \"indice\", \"0\", 3, \"datos\", \"columnas\", \"nombreBotones\", \"parentMethod\"], [\"id\", \"modal-1\", \"altura\", \"80\", \"ancho\", \"70\"], [1, \"tablaPedidos\"], [\"colorLetra\", \"black\", \"indice\", \"1\", 3, \"datos\", \"columnas\"], [1, \"btnCerrar\", 3, \"click\"], [\"id\", \"modal-2\", \"altura\", \"40\", \"ancho\", \"50\"], [\"id\", \"btnCambiarEstado\", 1, \"boton\", 3, \"click\"], [\"id\", \"btnCerrar\", 1, \"boton\", 3, \"click\"]],\n    template: function PedidosActivosComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵelementStart(1, \"app-tabla-reusable\", 1);\n        i0.ɵɵlistener(\"parentMethod\", function PedidosActivosComponent_Template_app_tabla_reusable_parentMethod_1_listener($event) {\n          return ctx.funcionBoton($event);\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(2, \"jw-modal\", 2);\n        i0.ɵɵelementStart(3, \"h1\");\n        i0.ɵɵtext(4, \"Informacion Pedido\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(5, \"div\", 3);\n        i0.ɵɵelement(6, \"app-tabla-reusable\", 4);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(7, \"p\");\n        i0.ɵɵelementStart(8, \"button\", 5);\n        i0.ɵɵlistener(\"click\", function PedidosActivosComponent_Template_button_click_8_listener() {\n          return ctx.modalServicio.cerrar(\"modal-1\");\n        });\n        i0.ɵɵtext(9, \"Cerrar\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(10, \"jw-modal\", 6);\n        i0.ɵɵelementStart(11, \"h2\");\n        i0.ɵɵtext(12, \"Seguro que quiere cambiar estado de pedido?\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(13, \"p\");\n        i0.ɵɵtext(14);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(15, \"p\");\n        i0.ɵɵelementStart(16, \"button\", 7);\n        i0.ɵɵlistener(\"click\", function PedidosActivosComponent_Template_button_click_16_listener() {\n          return ctx.cambiarEstado(ctx.pedidoSeleccionado);\n        });\n        i0.ɵɵtext(17, \"SI\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(18, \"p\");\n        i0.ɵɵelementStart(19, \"button\", 8);\n        i0.ɵɵlistener(\"click\", function PedidosActivosComponent_Template_button_click_19_listener() {\n          return ctx.modalServicio.cerrar(\"modal-2\");\n        });\n        i0.ɵɵtext(20, \"Cancelar\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"datos\", ctx.datos)(\"columnas\", ctx.columnas)(\"nombreBotones\", ctx.nombreBotones);\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"datos\", ctx.pedidoSeleccionadoDatos)(\"columnas\", ctx.pedidoSeleccionadoColumnas);\n        i0.ɵɵadvance(8);\n        i0.ɵɵtextInterpolate(ctx.pedidoSeleccionado.name);\n      }\n    },\n    directives: [i3.TablaReusableComponent, i4.ModalComponent],\n    styles: [\"div[_ngcontent-%COMP%]{margin:2px;padding:3px}*[_ngcontent-%COMP%]{font-family:\\\"open sans\\\"}h1[_ngcontent-%COMP%]{margin-top:-40px;font-size:50px}h2[_ngcontent-%COMP%]{font-size:40px;margin-top:-50px}.boton[_ngcontent-%COMP%]{background-color:#f5f5f5;border-radius:10px;margin-top:20px}#btnCambiarEstado[_ngcontent-%COMP%]{position:absolute;width:60px;height:40px;margin-left:21%;font-size:20px}#btnCerrar[_ngcontent-%COMP%]{position:absolute;width:110px;height:40px;margin-left:43%;font-size:25px}.btnCerrar[_ngcontent-%COMP%]{background-color:#f5f5f5;border-radius:10px;margin-top:10px;position:absolute;width:100px;height:40px;margin-left:31%;font-size:20px}.tablaUsuarios[_ngcontent-%COMP%]{border-radius:5px;height:400px;width:100%}jw-modal[_ngcontent-%COMP%]   btnCerrar[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;cursor:pointer;border-radius:20%}.tablaPedidos[_ngcontent-%COMP%]{border-radius:5px;height:70%;width:100%}.tablaConfirmacion[_ngcontent-%COMP%]{height:300px;width:100%}.boton[_ngcontent-%COMP%]{height:50px;width:70px}\"]\n  });\n  return PedidosActivosComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}