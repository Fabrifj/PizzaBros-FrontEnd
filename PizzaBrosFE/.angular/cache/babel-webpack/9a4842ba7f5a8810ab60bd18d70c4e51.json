{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/servicios/app-http.service\";\nimport * as i2 from \"src/app/shared-modules/modal/modal.service\";\nimport * as i3 from \"../../../../shared-modules/modal/modal.component\";\nimport * as i4 from \"../../../../shared-modules/tabla-reusable/tabla-reusable.component\";\nexport let CreacionCategoriasComponent = /*#__PURE__*/(() => {\n  class CreacionCategoriasComponent {\n    constructor(servicioHttp, servicioModal) {\n      this.servicioHttp = servicioHttp;\n      this.servicioModal = servicioModal;\n      this.objetoSeleccionado = {};\n      this.columnasCat = [{\n        field: 'Nombre',\n        header: 'Nombre'\n      }, {\n        field: 'Descripcion',\n        header: 'Descripcion'\n      } // {field:'Imagen',header:'Imagen'}\n      ];\n      this.columnasProdMini = [{\n        field: 'NombreProducto',\n        header: 'Nombre Producto'\n      } // {field:'Imagen',header:'Imagen'}\n      ];\n      this.columnasProd = [{\n        field: 'Nombre',\n        header: 'Nombre Producto'\n      } // {field:'Imagen',header:'Imagen'}\n      ];\n      this.nombreBotonesCat1 = ['Seleccionar'];\n      this.nombreBotonesProd1 = ['Agregar'];\n      this.nombreBotonesProd2 = ['Quitar'];\n    }\n\n    ngOnInit() {\n      this.filtroCrear();\n      this.obtenerProductos();\n    }\n\n    obtenerCategorias() {\n      this.servicioHttp.obtenerCategorias().subscribe(jsonFile => {\n        console.log(jsonFile);\n        this.datosCat = jsonFile;\n      }, error => {\n        console.log(\"hubo error con categoria\");\n      });\n    }\n\n    obtenerProductos() {\n      this.servicioHttp.obtenerProductos().subscribe(jsonFile => {\n        console.log(jsonFile);\n        this.datosProd = jsonFile;\n        this.datosProdBackUp = this.datosProd;\n      }, error => {\n        console.log(\"hubo error con productos\");\n      });\n    }\n\n    funcionBoton(names) {\n      if (names[0] == \"Seleccionar\") {\n        this.objetoSeleccionado = names[1];\n        this.datosProdMini = this.objetoSeleccionado.ListaProductos;\n        this.datosProdMini.forEach(element => {\n          //quitar de lista grande\n          this.datosProd = this.datosProd.filter(obj => obj.id !== element.IdProducto);\n        });\n        document.getElementById(\"objetoSeleccionadoID\").value = this.objetoSeleccionado.Nombre;\n        document.getElementById(\"nuevoNC\").value = this.objetoSeleccionado.Nombre;\n        document.getElementById(\"nuevoDC\").value = this.objetoSeleccionado.Descripcion; //new\n\n        this.servicioModal.cerrar('modalCat-2');\n      } else if (names[0] == \"Agregar\") {\n        var elemAgregar = names[1]; //console.log(elemAgregar);\n        //quitar de lista grande\n\n        this.datosProd = this.datosProd.filter(obj => obj.id !== elemAgregar.id); //agregar a lista pequna\n\n        var elemNuevo = JSON.stringify({\n          IdProducto: elemAgregar.id,\n          NombreProducto: elemAgregar.Nombre,\n          ImgURL: elemAgregar.ImgURL\n        });\n        this.datosProdMini.push(JSON.parse(elemNuevo));\n      } else {\n        //quitar\n        var elemQuitar = names[1];\n        var productoSeleccionado = {};\n        this.datosProdBackUp.forEach(element => {\n          if (element.id == elemQuitar.IdProducto) {\n            productoSeleccionado = element;\n          }\n        }); //qutiar mini lista\n\n        this.datosProdMini = this.datosProdMini.filter(obj => obj.IdProducto !== elemQuitar.IdProducto); // var elemNuevo = JSON.stringify({ id: elemQuitar.IdProducto , Nombre: elemQuitar.NombreProducto , ImgURL: elemQuitar.ImgURL});\n\n        console.log(\"productoseleccionado\", productoSeleccionado);\n        this.datosProd.push(productoSeleccionado);\n      }\n    }\n\n    filtroCrear() {\n      this.nombreBoton = \"CREAR\";\n      this.objetoSeleccionado = \"\";\n      this.datosProdMini = [];\n      this.datosProd = this.datosProdBackUp;\n      document.getElementById(\"nuevoNC\").value = \"\";\n      document.getElementById(\"siModifico\").style.display = \"none\";\n      document.getElementById(\"nuevoDC\").value = \"\";\n      document.getElementById(\"crearC\").checked = true;\n    }\n\n    filtroModificar() {\n      this.nombreBoton = \"MODIFICAR\";\n      this.obtenerCategorias();\n      this.servicioModal.abrir('modalCat-2');\n      document.getElementById(\"siModifico\").style.display = \"inline\";\n    }\n\n    crearCategoria() {\n      var nombreC = document.getElementById(\"nuevoNC\").value;\n      var descripcionC = document.getElementById(\"nuevoDC\").value;\n      var categoria = JSON.stringify({\n        ListaProductos: this.datosProdMini,\n        Nombre: nombreC,\n        Descripcion: descripcionC\n      });\n      console.log(JSON.parse(categoria));\n\n      if (this.nombreBoton == \"CREAR\") {\n        this.servicioHttp.crearCategoria(JSON.parse(categoria)).subscribe(jsonFile => {\n          console.log(\"creado bien\");\n          alert('Categoria creada correctamente');\n        }, error => {\n          console.log(\"hubo error con crear categoria\");\n        });\n      } else {\n        //modificar\n        console.log(\"id modificar:\", this.objetoSeleccionado.id);\n        this.servicioHttp.actualizarCategoria(this.objetoSeleccionado.id, JSON.parse(categoria)).subscribe(jsonFile => {\n          alert('Categoria modificada correctamente');\n          console.log(\"modificado bien\");\n        }, error => {\n          console.log(\"hubo error con modificar categoria\");\n        });\n      }\n\n      this.filtroCrear();\n      this.obtenerCategorias();\n      this.obtenerProductos();\n    }\n\n  }\n\n  CreacionCategoriasComponent.ɵfac = function CreacionCategoriasComponent_Factory(t) {\n    return new (t || CreacionCategoriasComponent)(i0.ɵɵdirectiveInject(i1.AppHttpService), i0.ɵɵdirectiveInject(i2.ModalService));\n  };\n\n  CreacionCategoriasComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: CreacionCategoriasComponent,\n    selectors: [[\"app-creacion-categorias\"]],\n    decls: 44,\n    vars: 10,\n    consts: [[1, \"contenedorFiltros\"], [1, \"crearCate\"], [\"type\", \"radio\", \"id\", \"crearC\", \"name\", \"catCrear\", \"checked\", \"\", 3, \"click\"], [\"for\", \"contactChoice1\"], [1, \"modCate\"], [\"type\", \"radio\", \"id\", \"modC\", \"name\", \"catCrear\", 3, \"click\"], [\"for\", \"contactChoice2\"], [\"id\", \"siModifico\"], [\"type\", \"text\", \"id\", \"objetoSeleccionadoID\", \"readonly\", \"\"], [\"id\", \"modalCat-2\", \"altura\", \"80\"], [\"id\", \"tablaCategorias\"], [\"colorLetra\", \"black\", 3, \"datos\", \"columnas\", \"nombreBotones\", \"parentMethod\"], [1, \"botones\"], [1, \"btnCerrar\", 3, \"click\"], [1, \"contendorDatosC\"], [1, \"infoEditable\"], [\"type\", \"text\", \"id\", \"nuevoNC\"], [\"id\", \"nuevoDC\"], [1, \"contendorListadoSi\"], [1, \"contendorListadoNo\"], [1, \"contenedorBotones\"], [1, \"botonFinal\", 3, \"click\"], [1, \"botonFinal2\", 3, \"click\"]],\n    template: function CreacionCategoriasComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵelementStart(1, \"form\");\n        i0.ɵɵelementStart(2, \"div\");\n        i0.ɵɵelementStart(3, \"div\", 1);\n        i0.ɵɵelementStart(4, \"input\", 2);\n        i0.ɵɵlistener(\"click\", function CreacionCategoriasComponent_Template_input_click_4_listener() {\n          return ctx.filtroCrear();\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(5, \"label\", 3);\n        i0.ɵɵtext(6, \"Crear categor\\u00EDa\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(7, \"div\", 4);\n        i0.ɵɵelementStart(8, \"input\", 5);\n        i0.ɵɵlistener(\"click\", function CreacionCategoriasComponent_Template_input_click_8_listener() {\n          return ctx.filtroModificar();\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(9, \"label\", 6);\n        i0.ɵɵtext(10, \"Modificar categor\\u00EDa\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(11, \"div\", 7);\n        i0.ɵɵelementStart(12, \"h3\");\n        i0.ɵɵtext(13, \"Categoria a Modificar:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(14, \"input\", 8);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(15, \"jw-modal\", 9);\n        i0.ɵɵelementStart(16, \"h1\");\n        i0.ɵɵtext(17, \"Elegir Categor\\u00EDa:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(18, \"div\", 10);\n        i0.ɵɵelementStart(19, \"app-tabla-reusable\", 11);\n        i0.ɵɵlistener(\"parentMethod\", function CreacionCategoriasComponent_Template_app_tabla_reusable_parentMethod_19_listener($event) {\n          return ctx.funcionBoton($event);\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(20, \"div\", 12);\n        i0.ɵɵelementStart(21, \"button\", 13);\n        i0.ɵɵlistener(\"click\", function CreacionCategoriasComponent_Template_button_click_21_listener() {\n          ctx.servicioModal.cerrar(\"modalCat-2\");\n          return ctx.filtroCrear();\n        });\n        i0.ɵɵtext(22, \"Cancelar\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(23, \"div\", 14);\n        i0.ɵɵelementStart(24, \"div\", 15);\n        i0.ɵɵelementStart(25, \"h2\");\n        i0.ɵɵtext(26, \"Nombre:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(27, \"input\", 16);\n        i0.ɵɵelementStart(28, \"h2\");\n        i0.ɵɵtext(29, \"Descripcion:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(30, \"textarea\", 17);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(31, \"div\", 18);\n        i0.ɵɵelementStart(32, \"h1\");\n        i0.ɵɵtext(33, \"Productos que estan:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(34, \"app-tabla-reusable\", 11);\n        i0.ɵɵlistener(\"parentMethod\", function CreacionCategoriasComponent_Template_app_tabla_reusable_parentMethod_34_listener($event) {\n          return ctx.funcionBoton($event);\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(35, \"div\", 19);\n        i0.ɵɵelementStart(36, \"h1\");\n        i0.ɵɵtext(37, \"Productos por anadir:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(38, \"app-tabla-reusable\", 11);\n        i0.ɵɵlistener(\"parentMethod\", function CreacionCategoriasComponent_Template_app_tabla_reusable_parentMethod_38_listener($event) {\n          return ctx.funcionBoton($event);\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(39, \"div\", 20);\n        i0.ɵɵelementStart(40, \"button\", 21);\n        i0.ɵɵlistener(\"click\", function CreacionCategoriasComponent_Template_button_click_40_listener() {\n          return ctx.crearCategoria();\n        });\n        i0.ɵɵtext(41);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(42, \"button\", 22);\n        i0.ɵɵlistener(\"click\", function CreacionCategoriasComponent_Template_button_click_42_listener() {\n          return ctx.filtroCrear();\n        });\n        i0.ɵɵtext(43, \"Cancelar\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(19);\n        i0.ɵɵproperty(\"datos\", ctx.datosCat)(\"columnas\", ctx.columnasCat)(\"nombreBotones\", ctx.nombreBotonesCat1);\n        i0.ɵɵadvance(15);\n        i0.ɵɵproperty(\"datos\", ctx.datosProdMini)(\"columnas\", ctx.columnasProdMini)(\"nombreBotones\", ctx.nombreBotonesProd2);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"datos\", ctx.datosProd)(\"columnas\", ctx.columnasProd)(\"nombreBotones\", ctx.nombreBotonesProd1);\n        i0.ɵɵadvance(3);\n        i0.ɵɵtextInterpolate(ctx.nombreBoton);\n      }\n    },\n    directives: [i3.ModalComponent, i4.TablaReusableComponent],\n    styles: [\"*[_ngcontent-%COMP%]{font-family:\\\"open sans\\\"}.crearCate[_ngcontent-%COMP%]{position:absolute;top:-250px;right:350px;font-size:30px;color:beige}.modCate[_ngcontent-%COMP%]{position:absolute;top:-250px;right:30px;font-size:30px;color:beige}#modalCat-2[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-top:-50px;font-weight:bold}.botones[_ngcontent-%COMP%]{width:110px;height:40px;margin-left:38%;margin-top:72%;font-size:25px;bottom:20px}.contendorDatosC[_ngcontent-%COMP%]{position:absolute;top:-215px;left:350px;color:#000}.contendorListadoSi[_ngcontent-%COMP%]{position:absolute;top:-10px;left:350px;color:#000;width:81%}.contendorListadoNo[_ngcontent-%COMP%]{position:absolute;top:200px;left:350px;color:#000;width:81%}.botonFinal[_ngcontent-%COMP%]{position:absolute;width:110px;height:40px;margin-left:35%;font-size:25px;bottom:20px;top:530px;right:200px}.botonFinal2[_ngcontent-%COMP%]{position:absolute;width:110px;height:40px;margin-left:35%;font-size:25px;bottom:20px;top:530px;right:40px}\"]\n  });\n  return CreacionCategoriasComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}