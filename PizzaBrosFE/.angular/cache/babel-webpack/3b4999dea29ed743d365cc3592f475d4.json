{"ast":null,"code":"import { EventEmitter } from '@angular/core';\nimport { FinalOrderModel } from 'src/app/modelos/finalOrder';\nimport { UnitOrderModel } from 'src/app/modelos/unitOrder.model';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/servicios/app-http.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/router\";\nexport let HacerPedidoService = /*#__PURE__*/(() => {\n  class HacerPedidoService {\n    constructor(httpService, datepipe, router) {\n      this.httpService = httpService;\n      this.datepipe = datepipe;\n      this.router = router;\n      this.ordersChanged = new EventEmitter();\n      this.productos = [];\n      this.pedidos = [];\n      this.obtenerProductosHttp();\n    }\n\n    ngOnInit() {\n      this.obtenerProductosHttp();\n    }\n\n    obtenerProductosHttp() {\n      this.httpService.obtenerProductos().subscribe(jsonFile => {\n        console.log(jsonFile);\n        this.productos = jsonFile;\n        console.log(this.productos[0]);\n      });\n    }\n\n    crearPedidoHttp(pedidoFinal) {\n      let body = JSON.stringify(pedidoFinal);\n      console.log(body);\n      this.httpService.crearPedido(JSON.parse(body)).subscribe(response => {\n        console.log('Response from API', response);\n      }, error => {\n        console.log('Error', error);\n      });\n      this.pedidos = [];\n      this.router.navigate(['/pedidos']);\n    }\n\n    obtenerProductos() {\n      return this.productos.slice();\n    }\n\n    obtenerPedidos() {\n      console.log(\"get orders en accions\");\n      console.log(this.pedidos);\n      return this.pedidos.slice();\n    }\n\n    addOrder(newOrder, amount) {\n      this.pedidos.push(new UnitOrderModel(newOrder.Id, newOrder.Nombre, newOrder.Tamano, newOrder.Precio, newOrder.Precio * amount, amount));\n      console.log(\"add order\");\n      this.ordersChanged.emit(this.obtenerPedidos());\n    }\n\n    crearPedido(cliente) {\n      let today = new Date();\n      let date = today.getFullYear() + '-' + (today.getMonth() + 1) + '-' + today.getDate();\n      let pedidoFinal = new FinalOrderModel(1, 123, cliente, date, \"Preparando\", this.pedidos);\n      this.crearPedidoHttp(pedidoFinal);\n    }\n\n  }\n\n  HacerPedidoService.ɵfac = function HacerPedidoService_Factory(t) {\n    return new (t || HacerPedidoService)(i0.ɵɵinject(i1.AppHttpService), i0.ɵɵinject(i2.DatePipe), i0.ɵɵinject(i3.Router));\n  };\n\n  HacerPedidoService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n    token: HacerPedidoService,\n    factory: HacerPedidoService.ɵfac,\n    providedIn: 'root'\n  });\n  return HacerPedidoService;\n})();","map":null,"metadata":{},"sourceType":"module"}